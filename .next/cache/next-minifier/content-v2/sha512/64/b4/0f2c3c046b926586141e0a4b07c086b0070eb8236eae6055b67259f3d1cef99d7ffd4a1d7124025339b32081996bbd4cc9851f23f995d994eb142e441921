{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{\"/EDR\":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"QeBL\")}])},\"4Tsm\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return p}));var r=n(\"ODXe\"),a=n(\"q1tI\"),o=n.n(a),i=n(\"BMxC\"),l=n(\"OQ2h\"),u=n(\"pboS\"),s=n(\"YFqc\"),c=n.n(s),d=n(\"pHx+\"),f=o.a.createElement,p=function(e){var t,n=e.id,a=e.creatorId,o=Object(d.h)().data,s=Object(d.d)(),p=Object(r.a)(s,1)[0];return(null===o||void 0===o?void 0:null===(t=o.me)||void 0===t?void 0:t.id)!==a?null:f(i.a,null,f(c.a,{href:\"/post/edit/[id]\",as:\"/post/edit/\".concat(n)},f(l.a,{as:u.a,mr:4,icon:\"edit\",\"aria-label\":\"Edit Post\"})),f(l.a,{icon:\"delete\",\"aria-label\":\"Delete Post\",onClick:function(){p({variables:{id:n},update:function(e){e.evict({id:\"Post:\"+n})}})}}))}},OQ2h:function(e,t,n){\"use strict\";var r=n(\"pVnL\"),a=n.n(r),o=n(\"8OQS\"),i=n.n(o),l=n(\"qKvR\"),u=n(\"q1tI\"),s=n(\"w0db\"),c=n(\"eJLp\"),d=n(\"BMxC\"),f=Object(u.forwardRef)((function(e,t){var n=e.icon,r=e.isRound,o=e[\"aria-label\"],u=i()(e,[\"icon\",\"isRound\",\"aria-label\"]),f=(u.isFullWidth,u.leftIcon,u.rightIcon,u.loadingText,i()(u,[\"isFullWidth\",\"leftIcon\",\"rightIcon\",\"loadingText\"]));return Object(l.d)(c.a,a()({p:\"0\",borderRadius:r?\"full\":\"md\",ref:t,\"aria-label\":o},f),\"string\"===typeof n?Object(l.d)(s.a,{name:n,focusable:\"false\",color:\"currentColor\",\"aria-hidden\":!0}):Object(l.d)(d.a,{as:n,\"aria-hidden\":!0,focusable:\"false\",color:\"currentColor\"}))}));f.displayName=\"IconButton\",f.defaultProps=c.a.defaultProps,t.a=f},QeBL:function(e,t,n){\"use strict\";n.r(t);var r=n(\"q1tI\"),a=n.n(r),o=n(\"pVnL\"),i=n.n(o),l=n(\"8OQS\"),u=n.n(l),s=n(\"qKvR\"),c=n(\"Weur\"),d=n(\"BMxC\"),f=function(e){var t,n=e.direction,a=e.isInline,o=void 0!==a&&a,l=e.isReversed,f=void 0!==l&&l,p=e.children,v=e.align,b=e.justify,h=e.spacing,m=void 0===h?2:h,g=e.shouldWrapChildren,x=u()(e,[\"direction\",\"isInline\",\"isReversed\",\"children\",\"align\",\"justify\",\"spacing\",\"shouldWrapChildren\"]),O=f||n&&n.endsWith(\"reverse\"),w=o||n&&n.startsWith(\"row\");w&&(t=\"row\"),O&&(t=o?\"row-reverse\":\"column-reverse\"),n&&(t=n),w||O||n||(t=\"column\");var y=r.Children.toArray(p).filter(r.isValidElement);return Object(s.d)(c.a,i()({align:v,justify:b,direction:t},x),y.map((function(e,t){var n,a,o=y.length===t+1,l=w?((n={})[O?\"ml\":\"mr\"]=o?null:m,n):((a={})[O?\"mt\":\"mb\"]=o?null:m,a);return g?Object(s.d)(d.a,i()({d:\"inline-block\"},l,{key:\"stack-box-wrapper-\"+t}),e):Object(r.cloneElement)(e,l)})))},p=n(\"pboS\"),v=n(\"qWyU\"),b=n(\"sK1y\"),h=n(\"eJLp\"),m=n(\"YFqc\"),g=n.n(m),x=n(\"4Tsm\"),O=n(\"soUV\"),w=n(\"o0o1\"),y=n.n(w),j=n(\"HaE+\"),C=n(\"ODXe\"),E=n(\"h4VS\"),k=n(\"OQ2h\"),S=n(\"pHx+\"),I=n(\"lTCR\"),_=n.n(I),R=a.a.createElement;function q(){var e=Object(E.a)([\"\\n        fragment __ on Post {\\n          points\\n          voteStatus\\n        }\\n      \"]);return q=function(){return e},e}function L(){var e=Object(E.a)([\"\\n      fragment _ on Post {\\n        id\\n        points\\n        voteStatus\\n      }\\n    \"]);return L=function(){return e},e}var M=function(e,t,n){var r=n.readFragment({id:\"Post:\"+t,fragment:_()(L())});if(r){if(r.voteStatus===e)return;var a=r.points+(r.voteStatus?2:1)*e;n.writeFragment({id:\"Post:\"+t,fragment:_()(q()),data:{points:a,voteStatus:e}})}},W=function(e){var t=e.post,n=Object(r.useState)(\"not-loading\"),a=n[0],o=n[1],i=Object(S.m)(),l=Object(C.a)(i,1)[0];return R(c.a,{direction:\"column\",justifyContent:\"center\",alignItems:\"center\",mr:4},R(k.a,{onClick:Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.voteStatus){e.next=2;break}return e.abrupt(\"return\");case 2:return o(\"updoot-loading\"),e.next=5,l({variables:{postId:t.id,value:1},update:function(e){return M(1,t.id,e)}});case 5:o(\"not-loading\");case 6:case\"end\":return e.stop()}}),e)}))),variantColor:1===t.voteStatus?\"green\":void 0,isLoading:\"updoot-loading\"===a,\"aria-label\":\"updoot post\",icon:\"chevron-up\"}),t.points,R(k.a,{onClick:Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.voteStatus){e.next=2;break}return e.abrupt(\"return\");case 2:return o(\"downdoot-loading\"),e.next=5,l({variables:{postId:t.id,value:-1},update:function(e){return M(-1,t.id,e)}});case 5:o(\"not-loading\");case 6:case\"end\":return e.stop()}}),e)}))),variantColor:-1===t.voteStatus?\"red\":void 0,isLoading:\"downdoot-loading\"===a,\"aria-label\":\"downdoot post\",icon:\"chevron-down\"}))},D=n(\"niIi\"),H=a.a.createElement;t.default=Object(D.a)({ssr:!0})((function(){var e=Object(S.j)({variables:{limit:15,cursor:null},notifyOnNetworkStatusChange:!0}),t=e.data,n=e.error,r=e.loading,a=e.fetchMore,o=e.variables;return r||t?H(O.a,null,!t&&r?H(\"div\",null,\"loading...\"):H(f,{spacing:8},t.posts.posts.map((function(e){return e?H(c.a,{key:e.id,p:5,shadow:\"md\",borderWidth:\"1px\"},H(W,{post:e}),H(d.a,{flex:1},H(g.a,{href:\"/post/[id]\",as:\"/post/\".concat(e.id)},H(p.a,null,H(v.a,{fontSize:\"xl\"},e.title))),H(b.a,null,\"posted by \",e.creator.username),H(c.a,{align:\"center\"},H(b.a,{flex:1,mt:4},e.textSnippet),H(d.a,{ml:\"auto\"},H(x.a,{id:e.id,creatorId:e.creator.id}))))):null}))),t&&t.posts.hasMore?H(c.a,null,H(h.a,{onClick:function(){a({variables:{limit:null===o||void 0===o?void 0:o.limit,cursor:t.posts.posts[t.posts.posts.length-1].createdAt}})},isLoading:r,m:\"auto\",my:8},\"load more\")):null):H(\"div\",null,H(\"div\",null,\"you got query failed for some reason\"),H(\"div\",null,null===n||void 0===n?void 0:n.message))}))},YFqc:function(e,t,n){e.exports=n(\"cTJO\")},cTJO:function(e,t,n){\"use strict\";var r=n(\"zoAU\"),a=n(\"7KCV\");t.__esModule=!0,t.default=void 0;var o,i=a(n(\"q1tI\")),l=n(\"g/15\"),u=n(\"nOHt\"),s=n(\"elyg\");var c=new Map,d=window.IntersectionObserver,f={};var p=function(e,t){var n=o||(d?o=new d((function(e){e.forEach((function(e){if(c.has(e.target)){var t=c.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(o.unobserve(e.target),c.delete(e.target),t())}}))}),{rootMargin:\"200px\"}):void 0);return n?(n.observe(e),c.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}c.delete(e)}):function(){}};function v(e,t,n,r){e.prefetch(t,n,r).catch((function(e){0})),f[t+\"%\"+n]=!0}function b(e,t,n,r,a,o,i){var u=e.currentTarget,s=u.nodeName,c=u.target;\"A\"===s&&(c&&\"_self\"!==c||e.metaKey||e.ctrlKey||e.shiftKey||e.nativeEvent&&2===e.nativeEvent.which)||function(e){var t=(0,l.getLocationOrigin)();return new URL(e,t).origin===t}(n)&&(e.preventDefault(),null==i&&(i=r.indexOf(\"#\")<0),t[a?\"replace\":\"push\"](n,r,{shallow:o}).then((function(e){e&&i&&(window.scrollTo(0,0),document.body.focus())})))}var h=function(e){var t=!1!==e.prefetch,n=i.default.useState(),a=r(n,2),o=a[0],l=a[1],c=(0,u.useRouter)(),h=c&&c.pathname||\"/\",m=i.default.useMemo((function(){var t=(0,s.resolveHref)(h,e.href);return{href:t,as:e.as?(0,s.resolveHref)(h,e.as):t}}),[h,e.href,e.as]),g=m.href,x=m.as;i.default.useEffect((function(){if(t&&d&&o&&o.tagName&&!f[g+\"%\"+x])return p(o,(function(){v(c,g,x)}))}),[t,o,g,x,c]);var O=e.children,w=e.replace,y=e.shallow,j=e.scroll;\"string\"===typeof O&&(O=i.default.createElement(\"a\",null,O));var C=i.Children.only(O),E={ref:function(e){e&&l(e),C&&\"object\"===typeof C&&C.ref&&(\"function\"===typeof C.ref?C.ref(e):\"object\"===typeof C.ref&&(C.ref.current=e))},onClick:function(e){C.props&&\"function\"===typeof C.props.onClick&&C.props.onClick(e),e.defaultPrevented||b(e,c,g,x,w,y,j)}};return t&&(E.onMouseEnter=function(e){C.props&&\"function\"===typeof C.props.onMouseEnter&&C.props.onMouseEnter(e),v(c,g,x,{priority:!0})}),!e.passHref&&(\"a\"!==C.type||\"href\"in C.props)||(E.href=(0,s.addBasePath)(x)),i.default.cloneElement(C,E)};t.default=h},\"hGi/\":function(e,t,n){\"use strict\";function r(e){if(null==e)throw new TypeError(\"Cannot destructure undefined\")}n.d(t,\"a\",(function(){return r}))},pboS:function(e,t,n){\"use strict\";var r=n(\"pVnL\"),a=n.n(r),o=n(\"8OQS\"),i=n.n(o),l=n(\"qKvR\"),u=n(\"+Cyc\"),s=n(\"q1tI\"),c={transition:\"all 0.15s ease-out\",cursor:\"pointer\",textDecoration:\"none\",outline:\"none\",_focus:{boxShadow:\"outline\"},_disabled:{opacity:\"0.4\",cursor:\"not-allowed\",textDecoration:\"none\"}},d=Object(s.forwardRef)((function(e,t){var n=e.isDisabled,r=e.isExternal,o=e.onClick,s=i()(e,[\"isDisabled\",\"isExternal\",\"onClick\"]),d=r?{target:\"_blank\",rel:\"noopener noreferrer\"}:null;return Object(l.d)(u.a,a()({as:\"a\",ref:t,tabIndex:n?-1:void 0,\"aria-disabled\":n,onClick:n?function(e){return e.preventDefault()}:o,_hover:{textDecoration:\"underline\"}},d,c,s))}));d.displayName=\"Link\",t.a=d},qWyU:function(e,t,n){\"use strict\";var r=n(\"pVnL\"),a=n.n(r),o=n(\"8OQS\"),i=n.n(o),l=n(\"qKvR\"),u=n(\"BMxC\"),s=n(\"q1tI\"),c={\"2xl\":[\"4xl\",null,\"5xl\"],xl:[\"3xl\",null,\"4xl\"],lg:[\"xl\",null,\"2xl\"],md:\"xl\",sm:\"md\",xs:\"sm\"},d=Object(s.forwardRef)((function(e,t){var n=e.size,r=void 0===n?\"xl\":n,o=i()(e,[\"size\"]);return Object(l.d)(u.a,a()({ref:t,as:\"h2\",fontSize:c[r],lineHeight:\"shorter\",fontWeight:\"bold\",fontFamily:\"heading\"},o))}));d.displayName=\"Heading\",t.a=d},sK1y:function(e,t,n){\"use strict\";var r=n(\"pVnL\"),a=n.n(r),o=n(\"q1tI\"),i=n.n(o),l=n(\"BMxC\"),u=i.a.forwardRef((function(e,t){return i.a.createElement(l.a,a()({ref:t,as:\"p\",fontFamily:\"body\"},e))}));u.displayName=\"Text\",t.a=u},soUV:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return C}));var r=n(\"q1tI\"),a=n.n(r),o=n(\"uHth\"),i=n(\"o0o1\"),l=n.n(i),u=n(\"HaE+\"),s=n(\"ODXe\"),c=n(\"hGi/\"),d=n(\"pboS\"),f=n(\"Weur\"),p=n(\"eJLp\"),v=n(\"BMxC\"),b=n(\"qWyU\"),h=n(\"YFqc\"),m=n.n(h),g=n(\"pHx+\"),x=n(\"nOHt\"),O=n(\"VX74\"),w=a.a.createElement,y=function(e){Object(c.a)(e);Object(x.useRouter)();var t=Object(g.g)(),n=Object(s.a)(t,2),r=n[0],o=n[1].loading,i=Object(O.useApolloClient)(),h=Object(g.h)({skip:!1}),y=h.data,j=null;return h.loading||(j=(null===y||void 0===y?void 0:y.me)?w(f.a,{align:\"center\"},w(m.a,{href:\"/create-post\"},w(p.a,{as:d.a,mr:4},\"create post\")),w(v.a,{mr:2},y.me.username),w(p.a,{onClick:Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.next=4,i.resetStore();case 4:case\"end\":return e.stop()}}),e)}))),isLoading:o,variant:\"link\"},\"logout\")):w(a.a.Fragment,null,w(m.a,{href:\"/login\"},w(d.a,{mr:2},\"login\")),w(m.a,{href:\"/register\"},w(d.a,null,\"register\")))),w(f.a,{zIndex:1,position:\"sticky\",top:0,bg:\"tan\",p:4},w(f.a,{flex:1,m:\"auto\",align:\"center\",maxW:800},w(m.a,{href:\"/\"},w(d.a,null,w(b.a,null,\"LiReddit\"))),w(v.a,{ml:\"auto\"},j)))},j=a.a.createElement,C=function(e){var t=e.children,n=e.variant;return j(a.a.Fragment,null,j(y,null),j(o.a,{variant:n},t))}}},[[\"/EDR\",2,1,0,4,3,5]]]);","extractedComments":[]}