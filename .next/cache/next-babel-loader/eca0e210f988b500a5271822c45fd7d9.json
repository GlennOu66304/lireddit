{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport { Box, Link, Flex, Button, Heading } from \"@chakra-ui/core\";\nimport NextLink from \"next/link\";\nimport { useMeQuery, useLogoutMutation } from \"../generated/graphql\";\nimport { isServer } from \"../utils/isServer\";\nimport { useRouter } from \"next/router\";\nimport { useApolloClient } from \"@apollo/client\";\nexport const NavBar = ({}) => {\n  const router = useRouter();\n  const [logout, {\n    loading: logoutFetching\n  }] = useLogoutMutation();\n  const apolloClient = useApolloClient();\n  const {\n    data,\n    loading\n  } = useMeQuery({\n    skip: isServer()\n  });\n  let body = null; // data is loading\n\n  if (loading) {// user not logged in\n  } else if (!(data === null || data === void 0 ? void 0 : data.me)) {\n    body = __jsx(React.Fragment, null, __jsx(NextLink, {\n      href: \"/login\"\n    }, __jsx(Link, {\n      mr: 2\n    }, \"login\")), __jsx(NextLink, {\n      href: \"/register\"\n    }, __jsx(Link, null, \"register\"))); // user is logged in\n  } else {\n    body = __jsx(Flex, {\n      align: \"center\"\n    }, __jsx(NextLink, {\n      href: \"/create-post\"\n    }, __jsx(Button, {\n      as: Link,\n      mr: 4\n    }, \"create post\")), __jsx(Box, {\n      mr: 2\n    }, data.me.username), __jsx(Button, {\n      onClick: async () => {\n        await logout();\n        await apolloClient.resetStore();\n      },\n      isLoading: logoutFetching,\n      variant: \"link\"\n    }, \"logout\"));\n  }\n\n  return __jsx(Flex, {\n    zIndex: 1,\n    position: \"sticky\",\n    top: 0,\n    bg: \"tan\",\n    p: 4\n  }, __jsx(Flex, {\n    flex: 1,\n    m: \"auto\",\n    align: \"center\",\n    maxW: 800\n  }, __jsx(NextLink, {\n    href: \"/\"\n  }, __jsx(Link, null, __jsx(Heading, null, \"LiReddit\"))), __jsx(Box, {\n    ml: \"auto\"\n  }, body)));\n};","map":null,"metadata":{},"sourceType":"module"}